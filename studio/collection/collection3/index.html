<!DOCTYPE html>
<html>
<head>
	<title>Collection 3</title>
	<script src = "https://code.jquery.com/jquery-3.3.0.js"></script>
</head>
<body>
	<button id="back">back</button>
	<!-- <div id = "Memory"></div> -->
	<style>
		#mem1{
			position: absolute;
			left: 300px;
			top:50px;
			margin:0;
			padding:0;

		}

		img{
			position:absolute;
		/*	height: 100;*/
			width: 95vw;
			margin-left: auto;
			margin-right: auto;
			display: flex;
			justify-content: center;
			/*left:200px;
			top:10px;*/
			z-index: -1;
		}

		body{ 
		font-family: arial, sans-serif, bold;
		font-size: 20px;
		}
	</style>

<ul id="menu"></ul>
<script>


var url = "https://raw.githubusercontent.com/wangt443/ci19/master/studio/collection/csvjson.json";

var data;

fetch(url)
	.then(function(data){return data.json();})
	.then(function(json){buildPage(json);})

var categories = [];

function buildPage(array) {
	data = array;
	for (var i = 0; i < array.length; i++) {
		// if this category is not yet inside categories array
		if (categories.indexOf(array[i].category) === -1) {
			categories.push(array[i].category);
		}
	}

	for(var i = 0; i < categories.length; i++) {
		var columncategory = document.createElement("li");
		columncategory.innerHTML = categories[i];
		(function(index){
			columncategory.onclick = function(){
				secondPage(categories[index]);
			}
		})(i);
		document.getElementById("menu").appendChild(columncategory);
	}
}

function secondPage(category) {
	document.getElementById("menu").style.display = "none";
	// build page with category
	var thisData = data.filter(function(su){
			return su.category == category;
		});
	console.log(thisData);

	// create content
	for(var i = 0; i < thisData.length; i++){
		var hats = array.filter(function(su){
			return su.category == "hats"; 
		}); 
		console.log(thisData[i]);

		thisData[i].where 


		var hh = thisdata[i].name;
		var hhCreate = document.createElement("li");
		hhCreate.innerHTML = hh;
		document.body.appendChild(hhCreate);

		var mem = document.createElement("h1");
		document.body.appendChild(mem).setAttribute("id","mem1");;

		var img = document.createElement("img");
		document.body.appendChild(imgg).setAttribute("id","hat1");

		hhCreate.counter = i;

		hhCreate.onmouseover = function(event){
			mem.innerHTML = blabla[event.target.counter].memory;
				document.getElementById("hat1").setAttribute("src","https://wangt443.github.io/ci19/studio/collection/hats/1.jpg");
		}

		hhCreate.onmouseout = function(event){
			mem.innerHTML = null;
				document.getElementById("hat1").setAttribute("src","");

		}

	}
 
 var backButton = document.getElementById("back");
    	backButton.onclick = backtoMain () {
        showMainContainer();
        }
        backButton.style.display = "none";

	// create the back button
	// set back button onclick = backToMain


}

function backToMain(){
	hideMainContainer(); 
	}
	backButton.style.display = "block";

	// hide that same content here


	document.getElementById("menu").style.display = "block";

}

function sortData(array){
	// console.log(array);
	for(var i = 0; i < array.length; i++){
		var blabla = array.filter(function(su){
			return su.category == "hats";
		});
		console.log(blabla);

		var hh = blabla[i].name;
		var hhCreate = document.createElement("li");
		hhCreate.innerHTML = hh;
		document.body.appendChild(hhCreate);

		var mem = document.createElement("h1");
		document.body.appendChild(mem).setAttribute("id","mem1");;

		var imgg = document.createElement("img");
		document.body.appendChild(imgg).setAttribute("id","hat1");

		hhCreate.counter = i;

		hhCreate.onmouseover = function(event){
			mem.innerHTML = blabla[event.target.counter].memory;
				document.getElementById("hat1").setAttribute("src","https://wangt443.github.io/ci19/studio/collection/hats/1.jpg");
		}

		hhCreate.onmouseout = function(event){
			mem.innerHTML = null;
				document.getElementById("hat1").setAttribute("src","");

		}


	}

//////////////////////////

//sort DOES modify the original array
//function compare(a, b) {
//   if (a is less than b by some ordering criterion) {
//     return -1;
//   }
//   if (a is greater than b by the ordering criterion) {
//     return 1;
//   }
//   // a must be equal to b
//   return 0;
// }
	// array.sort(function(a,b){
	// 	if (a.city < b.city) return -1;
	// 	if (b.city < a.city) return 1;
	// 	return 0;
	// });


}
</script>
</body>
</html>